language: node_js
node_js:
  - 10.19.0
before_script :
 - curl -o- -L https://yarnpkg.com/install.sh | bash -s
 - export PATH=$HOME/.yarn/bin:$PATH
 - yarn install
- run:
    name: update yarn
    command: |
      # remove default yarn
      sudo rm -rf $(dirname $(which yarn))/yarn*
      # download latest
      rm -rf ~/.yarn
      curl -o- -L https://yarnpkg.com/install.sh | bash
      echo 'export PATH="${PATH}:${HOME}/.yarn/bin"' >> $BASH_ENV 
after_script:
  - "./node_modules/coveralls/bin/coveralls.js < ./coverage/lcov.info"
